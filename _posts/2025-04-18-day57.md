---
title: "[Day57] ì‡¼í•‘ëª° ì‹¤ìŠµ - Tab, Modal, Cart"
categories: [Ureca, React]
tags: [React, JS, Tab, Modal, Cart ]
image:
  path: /assets/post/2025/ureca/day57_class_1.png
  alt: React
published: true
---


## ğŸ”¸ tab

### êµ¬í˜„ í¬ì¸íŠ¸
1ï¸âƒ£ `useState(0)`ìœ¼ë¡œ í˜„ì¬ ì„ íƒëœ íƒ­ì˜ `index` ì €ì¥
```jsx
 const [activeTab, setActive] = useState(0)
```

2ï¸âƒ£ íƒ­ ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ `index`ë¥¼ ìƒíƒœë¡œ ë³€ê²½
```jsx
{tabTiles.map((title, i) => (
  <button
    key={i}
    className={activeTab === i ? css.active : ''}
    onClick={() => setActive(i)}
  >
    {title}
  </button>
))}
```

3ï¸âƒ£ ê° íƒ­ ì½˜í…ì¸  ì˜ì—­ì—ì„œ `activeTab === i` ì¡°ê±´ìœ¼ë¡œ ë³´ì—¬ì¤„ ì½˜í…ì¸ ë¥¼ ê²°ì •        
```js
<div className={`${css.tabContent} ${activeTab === 0 ? css.active : ''}`}>
```

### ì „ì²´ ì½”ë“œ

```jsx
const DetailTabInfo = () => {
  const [activeTab, setActive] = useState(0)
  const tabTiles = ['ë©”ë‰´1', 'ë©”ë‰´2', 'ë©”ë‰´3']

  return (
    <>
      <div className={css.tabBtn}>
        {tabTiles.map((title, i) => (
          <button
            key={i}
            className={activeTab === i ? css.active : ''}
            onClick={() => setActive(i)}
          >
            {title}
          </button>
        ))}
      </div>
      <div className={`${css.tabContent} ${activeTab === 0 ? css.active : ''}`}>
        <h3>ì œëª©</h3>
      </div>
      <div className={`${css.tabContent} ${activeTab === 1 ? css.active : ''}`}>
        <h3>ì œëª©2</h3>
      </div>
      <div className={`${css.tabContent} ${activeTab === 2 ? css.active : ''}`}>
        <h3>ì œëª©3</h3>
      </div>
    </>
  )
}

export default DetailTabInfo
```

### UI

<img src="/assets/post/2025/ureca/day57_class_1.png" alt='day57' width=1300px>

-----

## ğŸ”¸ Modal

### êµ¬í˜„ í¬ì¸íŠ¸
1ï¸âƒ£ `useEffect`ë¥¼ ì‚¬ìš©í•´ì„œ ëª¨ë‹¬ì´ ì¼œì§ˆ ë•Œ(ì²˜ìŒ ë§ˆìš´íŠ¸ ì‹œ) `active` í´ë˜ìŠ¤ ë¶€ì—¬

```jsx
useEffect(() => {
  const timer = setTimeout(() => {
    setIsActive(true)
    document.body.style.overflow = 'hidden'
  }, 5)

  return () => {
    clearTimeout(timer)
    document.body.style.overflow = 'auto'
  }
}, [])
```

âœ… íŠ¸ëœì§€ì…˜ íš¨ê³¼ ì œëŒ€ë¡œ ë™ì‘í•˜ê²Œ í•˜ê¸° ìœ„í•´ setTimeout ì‚¬ìš©

- `setTimeout`ì„ ì•ˆì“°ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ìë§ˆì ë°”ë¡œ active í´ë˜ìŠ¤ê°€ ë¶™ì–´ë²„ë¦¼
- ë¬¸ì œëŠ” ì• ë‹ˆë©”ì´ì…˜(transition)ì´ ì•ˆ ë¨¹ëŠ” ê²½ìš°ê°€ ìƒê¹€
- ê·¸ë˜ì„œ ë¸Œë¼ìš°ì €ê°€ ë¨¼ì € ì´ˆê¸° ìŠ¤íƒ€ì¼ì„ ë Œë”ë§í•˜ê²Œ í•œ í›„ `active`ë¥¼ ë¶™ì„

2ï¸âƒ£ ëª¨ë‹¬ì´ ì—´ë¦¬ë©´ `body.style.overflow = 'hidden'`ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ë°©ì§€
```jsx
document.body.style.overflow = 'hidden' 
```

3ï¸âƒ£ ì·¨ì†Œ ë²„íŠ¼ì´ë‚˜ ì™¸ë¶€ ë²„íŠ¼ í´ë¦­ ì‹œ ë‹«í˜ (í´ë˜ìŠ¤ ì œê±° í›„ `setTimeout`ìœ¼ë¡œ ì• ë‹ˆë©”ì´ì…˜ ì ìš©)
```jsx
const handleClose = () => {
  setIsActive(false)
  setTimeout(onClose, 300)
}
```

âœ… ê·¸ëƒ¥ ë°”ë¡œ onClose() í˜¸ì¶œí•˜ë©´ ëª¨ë‹¬ì´ ì• ë‹ˆë©”ì´ì…˜ ì—†ì´ íˆ­ êº¼ì§
<br/>

4ï¸âƒ£ "ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°" ëˆ„ë¥´ë©´ `addToCart` API ì‹¤í–‰ â†’ ëª¨ë‹¬ ë‹«ê³  â†’ `/cart`ë¡œ ì´ë™

```jsx
const handleAddToCart = async () => {
  const cartItem = {
    id: product.id,
    title: product.title,
    img: product.img,
    price: product.price,
    category: product.category,
    discount: product.discount,
    count: count,
  }

  await addToCart(cartItem)
  handleClose()
  navigate('/cart')
}
```

### ì „ì²´ ì½”ë“œ

```jsx
const Modal = ({ product, count, onClose }) => {
  const [isActive, setIsActive] = useState(false)
  const navigate = useNavigate()

  useEffect(() => {
    const timer = setTimeout(() => {
      setIsActive(true)
      document.body.style.overflow = 'hidden'
    }, 5)

    return () => {
      clearTimeout(timer)
      document.body.style.overflow = 'auto'
    }
  }, [])

  const handleClose = () => {
    setIsActive(false)
    setTimeout(onClose, 300)
  }

  const handleAddToCart = async () => {
    try {
      const cartItem = {
        id: product.id,
        title: product.title,
        img: product.img,
        price: product.price,
        category: product.category,
        discount: product.discount,
        count: count,
      }
      await addToCart(cartItem)
      handleClose()
      navigate('/cart')
    } catch (err) {
      console.log('err', err)
    }
  }
  return (
    <div className={`${css.modal} ${isActive ? css.active : ''}`}>
      <div className={`${css.container} `}>
        <div className={css._inner}>
          <h2>ì¥ë°”êµ¬ë‹ˆ</h2>
          <div className={css.imgWrap}>
            <img src={`/public/img/${product.img}`} alt={product.title} />
          </div>
          <div className={css.info}>
            <p>{product.tilte}</p>
            <p>{product.price.toLocaleString()}ì›</p>
            {product.discount > 0 && <p>{product.discount}%</p>}
            <p>{count}</p>
            <p>ì´ ê°€ê²© : {(product.price * count).toLocaleString()}</p>
          </div>
          <button onClick={handleClose}>ì·¨ì†Œ</button>
          <button onClick={handleAddToCart}>ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
        </div>
        <button className={css.btnClose} onClick={handleClose}>
          <i className="bi bi-x-lg"></i>
        </button>
      </div>
    </div>
  )
}
```

## UI ì™„ì„± ì „ ! ì¼ë‹¨ ë°ì´í„° ë³´ë‚´ëŠ”ê±° í™•ì¸

<img src="/assets/post/2025/ureca/day57_class_2.png" alt='day57' width=1300px>


-----


## ğŸ”¸ Cart

### êµ¬í˜„ í¬ì¸íŠ¸
1ï¸âƒ£ ë¼ìš°í„° ì„¤ì • ìœ¼ë¡œ `/cart` ì§„ì… ì‹œ, `CartPage` ë Œë”ë§

```jsx
{ path: '/cart', element: <CartPage />, loader: cartPageLoader }
```

2ï¸âƒ£ `loader` í•¨ìˆ˜ë¡œ ì¥ë°”êµ¬ë‹ˆ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

```js
export const cartPageLoader = async () => {
  try {
    const cartItems = await getCartData()
    if (!cartItems || cartItems.length === 0) {
      return { cartItems: [] }
    }
    return cartItems
  } catch (err) {
    console.log('err', err)
  }
}
```

3ï¸âƒ£ ì¥ë°”êµ¬ë‹ˆ ë°ì´í„° ì²˜ë¦¬ `cartApi.js`
- `getCartData()` : ì¥ë°”êµ¬ë‹ˆ ì „ì²´ ì¡°íšŒ

```jsx
export const getCartData = async () => {
  try {
    const res = await axios.get(`/api/cart/`)
    console.log('getCartData.js : getCartData', res)
    return res.data
  } catch (err) {
    console.log('err', err)
  }
}
```
  
- `addToCart()` : ë™ì¼ ìƒí’ˆ ìˆìœ¼ë©´ count ì¦ê°€(PUT), ì—†ìœ¼ë©´ ìƒˆë¡œ ì¶”ê°€(POST)

```jsx
export const addToCart = async cartItem => {
  try {
    const cart = await getCartData()
    const existingItem = cart.find(item => item.id === cartItem.id)
    if (existingItem) {
      const uedateItem = {
        ...existingItem,
        count: existingItem.count + cartItem.count,
      }
      const res = await axios.put(`/api/cart/${existingItem.id}`, uedateItem)
      return res.data
    } else {
      const res = await axios.post(`/api/cart/`, cartItem)
      return res.data
    }
  } catch (err) {
    console.log('err', err)
  }
}
```

4ï¸âƒ£ `CartPage`ì—ì„œ `useLoaderData()`ë¡œ ë¶ˆëŸ¬ì˜¨ ì¥ë°”êµ¬ë‹ˆ ë°ì´í„° í™•ì¸
```jsx
const cartList = useLoaderData()
```

## UI ì™„ì„± ì „ ! ì¼ë‹¨ ë°ì´í„° ë°›ì•„ì˜¤ëŠ”ê±° í™•ì¸
<img src="/assets/post/2025/ureca/day57_class_3.png" alt='day57' width=1300px>

---

## END