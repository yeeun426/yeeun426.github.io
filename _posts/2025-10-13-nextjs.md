---
title: "React Router -> Next.js Router: í˜¼ìš©ìœ¼ë¡œ ì¸í•œ ì˜¤ë¥˜ì™€ ë§ˆì´ê·¸ë ˆì´ì…˜ ê³¼ì •"
categories: [Frontend, Next.js]
tags: [Next.js, async, defer]
image:
  path: /assets/post/React/letscareer.png
  alt: react
published: true
---

## ğŸ§­ React Router â†’ Next.js ë¼ìš°í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ë°°ê²½

ê¸°ì¡´ ë ›ì¸ ì»¤ë¦¬ì–´(LETâ€™S CAREER) ì„œë¹„ìŠ¤ëŠ” React ê¸°ë°˜ìœ¼ë¡œ ê°œë°œë˜ì—ˆìœ¼ë©°, ë¼ìš°íŒ…ì€ react-router-domì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤.        
í•˜ì§€ë§Œ Next.js ë„ì…ì„ í†µí•´ SSR(Server Side Rendering) ê³¼ SEO ìµœì í™”, ë¹Œë“œ íš¨ìœ¨ì„± ê°œì„  ë“±ì˜ ì´ì ì„ í™œìš©í•˜ê¸°ë¡œ ê²°ì •í•˜ë©´ì„œ, ë¼ìš°í„° ë˜í•œ Next.js App Routerë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ í•„ìš”í–ˆë‹¤.
              
ì²˜ìŒì—ëŠ” ëª¨ë“  ë¼ìš°í„°ë¥¼ í•œ ë²ˆì— ì „í™˜í•˜ê¸°ì—ëŠ” í”„ë¡œì íŠ¸ ë³¼ë¥¨ì´ ë„ˆë¬´ ì»¤ì„œ,            
ì¼ë¶€ í˜ì´ì§€ì—ì„œëŠ” `react-router-dom`ê³¼ Next.js ë¼ìš°í„°ê°€ í˜¼ìš©ëœ ìƒíƒœë¡œ ìš´ì˜ë˜ê³  ìˆì—ˆë‹¤.      
(ë‚´ê°€ ì²˜ìŒ ë ›ì»¤ í•©ë¥˜í–ˆì„ ë•Œ ìƒíƒœ ì˜€ìŒ)                  
ì´ë¡œ ì¸í•´ ë¦¬ë‹¤ì´ë ‰íŠ¸ ê³¼ì •ì—ì„œ `Application Error` ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œê°€ ë‚˜íƒ€ë‚¬ê³ ,                      
ì´ë¥¼ ê·¼ë³¸ì ìœ¼ë¡œ í•´ê²°í•˜ê¸° ìœ„í•´ `react-router-dom`ì˜ ì™„ì „í•œ ì œê±°ë¥¼ ëª©í‘œë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‘ì—…ì„ ì§„í–‰í•˜ê²Œ ë˜ì—ˆë‹¤.                  

<img src="/assets/post/React/101303.png" alt='' width=600px>


### íƒœí›ˆë‹˜ì´ ì‘ì„±í•˜ì‹  ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

<img src="/assets/post/React/1013.png" alt='' width=500px>

---

## ğŸ” useSearchParams

React Routerì—ì„œëŠ” ë³´í†µ ì´ë ‡ê²Œ ì‚¬ìš©

```tsx
const [searchParams, setSearchParams] = useSearchParams();
```

Next.js App Routerì—ì„œëŠ” **ë‹¨ìˆœíˆ í˜¸ì¶œë§Œìœ¼ë¡œ ì½ê¸° ì „ìš© ê°ì²´**ë¥¼ ì–»ìŒ

```tsx
const searchParams = useSearchParams();
```

`setSearchParams()`ë¥¼ ëŒ€ì²´í•˜ë ¤ë©´ `router.push()` ë˜ëŠ” `router.replace()`ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

#### âœ… ì˜ˆì‹œ

```tsx
// React Router
setSearchParams({}, { replace: true });

// Next.js
router.replace(window.location.pathname);
```

<img src="/assets/post/React/101301.png" alt='' width=1300px>

---

## ğŸ” useNavigate â†’ useRouter

React Routerì˜ `useNavigate`ëŠ” Next.jsì—ì„œ `useRouter`ë¡œ ëŒ€ì²´

```tsx
// React Router
import { useNavigate } from 'react-router-dom';

// Next.js
import { useRouter } from 'next/navigation';
```

| ê¸°ëŠ¥ | React Router                           | Next.js                   |
| -- | -------------------------------------- | ------------------------- |
| ì´ë™ | `navigate('/path')`                    | `router.push('/path')`    |
| êµì²´ | `navigate('/path', { replace: true })` | `router.replace('/path')` |


### ğŸ’¡ replace ì˜µì…˜ì˜ ì°¨ì´ëŠ” ë­˜ê¹Œ ?

#### 1ï¸âƒ£ `setSearchParams({})` (ê¸°ë³¸)

* **íˆìŠ¤í† ë¦¬ì— ìƒˆ í•­ëª© ì¶”ê°€**
* ë’¤ë¡œê°€ê¸° ì‹œ ì´ì „ íŒŒë¼ë¯¸í„° ìƒíƒœë¡œ ë³µì› ê°€ëŠ¥

```
1. /products?category=electronics  
2. setSearchParams({})  
3. /products  
â† ë’¤ë¡œê°€ê¸° â†’ /products?category=electronics
```

#### 2ï¸âƒ£ `setSearchParams({}, { replace: true })`

* **íˆìŠ¤í† ë¦¬ êµì²´ (ìƒˆ í•­ëª© X)**
* ë’¤ë¡œê°€ê¸° ëˆŒëŸ¬ë„ ì´ì „ íŒŒë¼ë¯¸í„°ë¡œ ëŒì•„ê°€ì§€ ì•ŠìŒ

```
1. /products?category=electronics  
2. setSearchParams({}, { replace: true })  
3. /products  
â† ë’¤ë¡œê°€ê¸° â†’ (ê·¸ ì´ì „ í˜ì´ì§€)
```

<img src="/assets/post/React/101302.png" alt='' width=600px>

---

## ğŸ” useParams

React Routerì—ì„œëŠ” íƒ€ì… ì§€ì • ì—†ì´ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©

```tsx
const { id } = useParams();
```

Next.jsì—ì„œëŠ” **ì œë„¤ë¦­ íƒ€ì…ì„ ëª…ì‹œ**í•  ìˆ˜ ìˆìŒ

```tsx
const { id } = useParams<{ id: string }>();
```

---

## ğŸ” NavLink â†’ Link + usePathname

`NavLink`ëŠ” Next.jsì˜ `<Link>` ì»´í¬ë„ŒíŠ¸ì™€ `usePathname()` í›…ì„ ì¡°í•©í•´ ëŒ€ì²´í•©ë‹ˆë‹¤.

```tsx
import Link from 'next/link';
import { usePathname } from 'next/navigation';

const pathname = usePathname();

<Link
  href="/dashboard"
  className={pathname === '/dashboard' ? 'active' : ''}
>
  Dashboard
</Link>
```

---

## ğŸ” window.location.pathname vs usePathname()

#### ë‘˜ ë‹¤ â€œí˜„ì¬ ê²½ë¡œ(path)â€ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• ì´ì§€ë§Œ...

| êµ¬ë¶„                             | `window.location.pathname`               | `usePathname()`                                            |
| ------------------------------ | ---------------------------------------- | ---------------------------------------------------------- |
| **ì„¤ëª…**                         | ë¸Œë¼ìš°ì € ë‚´ì¥ ê°ì²´(`window`)ë¥¼ í†µí•´ í˜„ì¬ URLì˜ ê²½ë¡œë¥¼ ê°€ì ¸ì˜´ | Next.jsì—ì„œ ì œê³µí•˜ëŠ” **ë¼ìš°íŒ… í›…**ìœ¼ë¡œ, í˜„ì¬ ê²½ë¡œë¥¼ React ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ ì•ˆì „í•˜ê²Œ ê°€ì ¸ì˜´ |
| **ì‚¬ìš© í™˜ê²½**                      | ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥ (í´ë¼ì´ì–¸íŠ¸ ì „ìš©)                 | **Next.js App Router ì „ìš©** (SSR + CSR ëª¨ë‘ ì•ˆì „)                |
| **SSR(Server Side Rendering)** | âŒ ì„œë²„ì—ëŠ” `window` ê°ì²´ê°€ ì—†ì–´ ì˜¤ë¥˜ ë°œìƒ             | âœ… ì„œë²„ì—ì„œë„ ë¬¸ì œ ì—†ì´ ì‘ë™                                           |
| **Next.js ë¼ìš°íŒ… ì—°ë™**             | âš ï¸ ë‹¨ìˆœ ë¬¸ìì—´ ê¸°ë°˜ ì ‘ê·¼                          | âœ… Next.js ë¼ìš°íŒ… ì‹œìŠ¤í…œê³¼ ì—°ë™ë˜ì–´ ìµœì í™”                                |
| **íƒ€ì… ì§€ì› (TS)**                 | âŒ ì—†ìŒ                                     | âœ… TypeScript ì™„ë²½ ì§€ì›                                         |
| **ì¶”ì²œ ì—¬ë¶€**                      | âš ï¸ ì„ì‹œ í…ŒìŠ¤íŠ¸ìš©, ë¸Œë¼ìš°ì € ì „ìš© ì½”ë“œì—ë§Œ ì‚¬ìš©              | âœ… Next.js í”„ë¡œì íŠ¸ì—ì„œëŠ” í•­ìƒ ê¶Œì¥                                    |

---

### ğŸ’¡ ì–¸ì œ `usePathname()`ì„ ì¨ì•¼ í• ê¹Œ?

> âœ… **Next.jsì˜ í˜ì´ì§€ ì´ë™, ì¿¼ë¦¬ ì¡°ì‘, ë¦¬ë‹¤ì´ë ‰íŠ¸ ë“±ì˜ ìƒí™©ì—ì„œ â€œí˜„ì¬ ê²½ë¡œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒˆ URLì„ ë§Œë“¤ ë•Œâ€**

#### ì‚¬ìš© ì˜ˆì‹œ (SSR ì•ˆì „)

```tsx
'use client'

import { useRouter, usePathname } from 'next/navigation';

function SearchForm({ inputs }) {
  const router = useRouter();
  const pathname = usePathname(); // í˜„ì¬ í˜ì´ì§€ ê²½ë¡œë¥¼ ì•ˆì „í•˜ê²Œ ê°€ì ¸ì˜´

  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();

    // ë¹ˆ ê°’ì€ ì œê±°í•˜ê³ , ë‚¨ì€ inputë§Œ ì¿¼ë¦¬ë¡œ ë³€í™˜
    const newSearchParams = Object.fromEntries(
      Object.entries(inputs).filter(([, value]) => value),
    );

    const params = new URLSearchParams(newSearchParams);

    // í˜„ì¬ í˜ì´ì§€ ê²½ë¡œ + ìƒˆë¡œìš´ ì¿¼ë¦¬ ì ìš©
    router.push(`${pathname}?${params.toString()}`);
  };

  return <form onSubmit={handleSubmit}>...</form>;
}
```

### âŒ ë¹„ê¶Œì¥ ì˜ˆì‹œ (window ì‚¬ìš©)

```tsx
// ì‘ë™ì€ í•˜ì§€ë§Œ SSRì—ì„œ ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥
router.push(`${window.location.pathname}?${params.toString()}`);
```

> âš ï¸ `window`ëŠ” ë¸Œë¼ìš°ì €ì—ë§Œ ì¡´ì¬í•˜ë¯€ë¡œ
> ì„œë²„ ë Œë”ë§ ì‹œ(`getServerSideProps`, `app router`) ì‚¬ìš©í•  ê²½ìš° **ReferenceError: window is not defined** ì—ëŸ¬ê°€ ë°œìƒ

---


## ì „ì²´ ë¹„êµ ìš”ì•½

| êµ¬ë¶„      | React Router               | Next.js                   |
| ------- | -------------------------- | ------------------------- |
| ë¼ìš°íŒ… í›…   | `useNavigate()`            | `useRouter()`             |
| íŒŒë¼ë¯¸í„° ì½ê¸° | `useParams()`              | `useParams()`             |
| ì¿¼ë¦¬ ì½ê¸°   | `useSearchParams()`        | `useSearchParams()`       |
| ì¿¼ë¦¬ ìˆ˜ì •   | `setSearchParams()`        | `router.push()/replace()` |
| í˜„ì¬ ê²½ë¡œ   | `window.location.pathname` | `usePathname()`           |

---

## ê²°ë¡ 

> ğŸ”‘ í•µì‹¬ ìš”ì•½
>
> * ë¼ìš°íŒ… ë³€ê²½: `useNavigate â†’ useRouter`
> * ì¿¼ë¦¬ ê´€ë¦¬: `setSearchParams â†’ router.push/replace`
> * ê²½ë¡œ ì ‘ê·¼: `window.location.pathname â†’ usePathname()`
> * UX ê°œì„ : ì´ˆê¸°í™” ë²„íŠ¼ ë“±ì€ `replace: true` í™œìš©

---


## END