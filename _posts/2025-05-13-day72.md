---
title: "[GitPulse #3] ì¡°ì§ë³„ ì»¤ë°‹ ìˆ˜ ì‹œê°í™”í•˜ê¸°"
categories: [Ureca, Project]
tags: [React, JS, Express, MongoDB, React Query]
image:
  path: /assets/post/2025/ureca/gitpulse.png
  alt: project
published: true
---

# âœ… ì˜¤ëŠ˜ì˜ ëª©í‘œ

- [x] GitHub ì¡°ì§ì˜ ë ˆí¬ì§€í† ë¦¬ì™€ ë©¤ë²„ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
- [x] ì„ íƒí•œ ë ˆí¬ì§€í† ë¦¬ì˜ ì»¤ë°‹ ë‚´ì—­ ê°€ì ¸ì˜¤ê¸°
- [x] ìš”ì¼ë³„ ì»¤ë°‹ ìˆ˜ ê³„ì‚° ë° ì‹œê°í™”

---

# ğŸ§© ë¬¸ì œ ìƒí™© / ë°°ê²½

- GitHub ì¡°ì§ì˜ í˜‘ì—… ê¸°ì—¬ë„ë¥¼ ì£¼ê°„ ë‹¨ìœ„ë¡œ í•œëˆˆì— íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€
- ë‹¨ìˆœ ì»¤ë°‹ ìˆ˜ë§Œ ë³´ì—¬ì£¼ëŠ” ë°©ì‹ì€ ëˆ„ê°€ ì–¸ì œ í™œë™í–ˆëŠ”ì§€ íŒŒì•…í•˜ê¸° í˜ë“¤ì—ˆìŒ
- í˜‘ì—… í™œì„±í™”ì™€ ì£¼ê°„ ê¸°ì—¬ë„ í™•ì¸ì„ ìœ„í•œ ì‹œê°ì  ì»¤ë°‹ ë¶„ì„ ë„êµ¬ í•„ìš”

---

# ğŸ› ï¸ í•´ê²° ê³¼ì • / ì½”ë“œ ì •ë¦¬

## ğŸ”¸ GitHub ì¡°ì§ ì •ë³´ ë³‘ë ¬ ìš”ì²­

```js
export const getOrgsInfo = async (org) => {
  try {
    const [members, repos] = await Promise.all([
      axios.get(`${BASE_URL}/orgs/${org}/members`),
      axios.get(`${BASE_URL}/orgs/${org}/repos`),
    ]);
    return {
      members: members.data,
      repos: repos.data,
    };
  } catch (error) {
    console.log("ì¡°ì§ ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨", error);
  }
};
```

- `members`ì™€ `repos`ëŠ” ì„œë¡œ ì˜ì¡´ì ì´ì§€ ì•Šìœ¼ë¯€ë¡œ `Promise.all()`ì„ ì‚¬ìš©í•˜ì—¬ ë³‘ë ¬ë¡œ ìš”ì²­
- ë³‘ë ¬ ìš”ì²­ì€ ì „ì²´ ì‘ë‹µ ëŒ€ê¸° ì‹œê°„ ë‹¨ì¶•ê³¼ UX ê°œì„ ì— íš¨ê³¼ì .

### âœ… `Promise.all()`ì„ ì‚¬ìš©í•œ ì´ìœ ëŠ”?
* ë…ë¦½ì ì¸ ë¹„ë™ê¸° ìš”ì²­ì„ ë™ì‹œì— ì²˜ë¦¬í•´ ë¶ˆí•„ìš”í•œ ëŒ€ê¸° ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
* ëª¨ë“  ìš”ì²­ì´ ì„±ê³µí•´ì•¼ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë©°, **í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ê°€ ì‹¤íŒ¨(reject)**ë˜ë¯€ë¡œ ì ì ˆí•œ ì—ëŸ¬ í•¸ë“¤ë§ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
* ë³‘ë ¬ ìš”ì²­ì„ í†µí•´ ì„±ëŠ¥ ìµœì í™” ê°€ëŠ¥í•˜ë©°, ì „ì²´ ì‘ë‹µ ëŒ€ê¸° ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
Promise.all([p1, p2, p3])
  â†’ p1, p2, p3ê°€ ëª¨ë‘ resolveë˜ë©´ [v1, v2, v3] ë°˜í™˜
  â†’ í•˜ë‚˜ë¼ë„ rejectë˜ë©´ ì¦‰ì‹œ error throw
```

> `Promise.all()`ì€ ë‹¨ìˆœíˆ "ë™ì‹œì— ìš”ì²­"í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì—¬ëŸ¬ ê°œì˜ Promise ê°ì²´ë¥¼ ë°°ì—´ í˜•íƒœë¡œ ë°›ì•„ ëª¨ë‘ resolveë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦° í›„, ê²°ê³¼ë¥¼ ë°°ì—´ í˜•íƒœë¡œ ë°˜í™˜í•¨        
> [ë³‘ë ¬ ì²˜ë¦¬ ì¡°ê±´]
> - ê° ìš”ì²­ì´ ë…ë¦½ì ì¼ ê²ƒ
> - ëª¨ë“  ìš”ì²­ì˜ ê²°ê³¼ê°€ ë™ì‹œì— í•„ìš”í•œ ê²½ìš°ì— ì í•©

----

## ğŸ”¸ ì„ íƒí•œ ë ˆí¬ì§€í† ë¦¬ì˜ ì£¼ê°„ ì»¤ë°‹ ìˆ˜ ê³„ì‚° ë¡œì§

### 1. ì¡°ì§ ë ˆí¬ì˜ ì»¤ë°‹ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°

```js
// ì¡°ì§ repo ë¶ˆëŸ¬ì˜¤ê¸°
export const getOrgsRepos = async (orgs, repo) => {
  try {
    const res = await axios.get(`${BASE_URL}/repos/${orgs}/${repo}/commits`);
    return res.data;
  } catch (error) {
    console.log("ì¡°ì§ ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨", error);
  }
};
```
- ì£¼ì–´ì§„ org, repoë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•´ë‹¹ ì €ì¥ì†Œì˜ ì»¤ë°‹ ë‚´ì—­ì„ ìš”ì²­

**GitHub Organizations Commit ì‘ë‹µ ë°ì´í„° êµ¬ì¡°**

![ì¡°ì§ repoì˜ ì»¤ë°‹ api ì‘ë‹µ](/assets/post/2025/ureca/day72_project_2.png)

### 2. ì£¼ê°„ ì»¤ë°‹ ìˆ˜ ê³„ì‚° ë¡œì§

#### 2-1. ì»¤ë°‹ ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ ì£¼ê°„ ë²”ìœ„ ìƒì„± 
> ì¦‰, 5ì›” 13ì¼ ì»¤ë°‹í•œ ê²½ìš° 7ì¼ ~ 13ì¼ê¹Œì§€ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼í•¨.

```js
const today = new Date(); // Tue May 27 2025 15:20:15 GMT+0900 (í•œêµ­ í‘œì¤€ì‹œ)
today.setUTCHours(0, 0, 0, 0);  // Tue May 27 2025 09:00:00 GMT+0900 (í•œêµ­ í‘œì¤€ì‹œ)

// Â ['2025-05-21', '2025-05-22', '2025-05-23', '2025-05-24', '2025-05-25', '2025-05-26', '2025-05-27']
const dateArray = [...Array(7)].map((_, i) => {
  const d = new Date(today);
  d.setUTCDate(today.getUTCDate() - (6 - i));
  return d.toISOString().split("T")[0];
});
```

#### âœ… ì™œ UTC ê¸°ì¤€ìœ¼ë¡œ ìƒì„±í•˜ë‚˜ìš”?
- GitHubì˜ `commit.commit.author.date`ëŠ” UTC ê¸°ë°˜ì„
- í´ë¼ì´ì–¸íŠ¸ì—ì„œë„ UTC ê¸°ì¤€ìœ¼ë¡œ ì¼ì£¼ì¼ì„ ìƒì„±í•´ì•¼ ì •í™•í•œ ë‚ ì§œ ë§¤ì¹­ì´ ê°€ëŠ¥
- `today.setUTCHours(0,0,0,0)`ìœ¼ë¡œ ì‹œê°„ì„ ìì •(00:00:00)ìœ¼ë¡œ ì´ˆê¸°í™” â†’ ë‚ ì§œ ë¹„êµì—ì„œ ì‹œê°„ ìš”ì†Œ ì œê±°.

#### ë‚´ê°€ í—·ê°ˆë ¤ì„œ ì •ë¦¬í•˜ëŠ” `date()` ë³€ìˆ˜
```js
console.log(d) // Wed May 21 2025 15:43:16 GMT+0900 (í•œêµ­ í‘œì¤€ì‹œ)
console.log(d.toISOString()); // 2025-05-21T06:43:16.454Z
```

- `setUTCDate(n)`: ë‚ ì§œë¥¼ UTC ê¸°ì¤€ìœ¼ë¡œ nì¼ë¡œ ì„¤ì •
- `getUTCDate()`: í˜„ì¬ ë‚ ì§œ ê°ì²´ì˜ UTC ê¸°ì¤€ ì¼(day) ê°’ì„ ë°˜í™˜

#### 2-2. ìš”ì¼ë³„ ì»¤ë°‹ ìˆ˜ ëˆ„ì ì„ ìœ„í•œ ì´ˆê¸° ìƒíƒœ êµ¬ì„±

```js
const commitCountByDay = dateArray.reduce((acc, dateStr) => {
  acc[dateStr] = { total: 0, mine: 0 };
  return acc;
}, {});
```

- ì»¤ë°‹ ìˆ˜ë¥¼ ë‚ ì§œë³„ë¡œ ëˆ„ì  ì €ì¥í•˜ê¸° ìœ„í•´, ë‚ ì§œë³„ í‚¤ì™€ ì´ˆê¸°ê°’ì„ ì„¤ì •
- `reduce`ë¡œ `commitCountByDay = { '2025-05-21': { total: 0, mine: 0 }, ... }` í˜•ì‹ìœ¼ë¡œ ì´ˆê¸°í™”.

#### 2-3. ì»¤ë°‹ ë°ì´í„°ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ë‚ ì§œë³„, ìœ ì €ë³„ ëˆ„ì 

```js
commit.forEach((commit) => {
  const dateStr = new Date(commit.commit.author.date).toISOString().split("T")[0];
  const authorLogin = commit.author?.login || commit.commit.author?.name || "anonymous";

  commitCountByDay[dateStr].total += 1;
  if (authorLogin === curUserLogin) commitCountByDay[dateStr].mine += 1;
});
```

* ë‚ ì§œ(dateStr) ê¸°ì¤€ìœ¼ë¡œ ì»¤ë°‹ì„ ê·¸ë£¹í™”í•˜ê³ , í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì(curUserLogin)ì˜ ì»¤ë°‹ì„ ë³„ë„ë¡œ êµ¬ë¶„í•´ì•¼ í•¨
* ì‘ì„±ì êµ¬ë¶„ì€ `login â†’ name â†’ fallback` ìˆœìœ¼ë¡œ ì‹ë³„
* `total`,`mine` ê°ê° ë‚ ì§œ ë³„ ì»¤ë°‹ ìˆ˜ ëˆ„ì 


#### ì „ì²´ ì½”ë“œ
```js
useEffect(() => {
  if (!commits || !curUserLogin) return;

  // ì»¤ë°‹ ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ ì£¼ê°„ ë²”ìœ„ ìƒì„±
  const today = new Date();
  today.setUTCHours(0, 0, 0, 0); // ì‹œê°„ ì´ˆê¸°í™”

  // ìš”ì¼ ë°°ì—´
  const dateArray = [...Array(7)].map((_, i) => {
      const d = new Date(today);
      d.setUTCDate(today.getUTCDate() - (6 - i));
      return d.toISOString().split("T")[0];
  });

  const commitCountByDay = dateArray.reduce((acc, dateStr) => {
    acc[dateStr] = { total: 0, mine: 0 };
    return acc;
  }, {});

    // ì»¤ë°‹ ìˆ˜ ê³„ì‚°
    commit.forEach((commit) => {
      const dateStr = new Date(commit.commit.author.date).toISOString().split("T")[0];
      const authorLogin = commit.author?.login || commit.commit.author?.name || "anonymous";

      commitCountByDay[dateStr].total += 1;
      if (authorLogin === curUserLogin) {
        commitCountByDay[dateStr].mine += 1;
    }
  });

  setCommitCounts(commitCountByDay); // ì§‘ê³„ ê²°ê³¼ ìƒíƒœì— ë°˜ì˜
}, [commits, curUserLogin]);
```

---

## ğŸ”¸ ì»¤ë°‹ ìˆ˜ ì°¨íŠ¸ë¡œ ì‹œê°í™” (Recharts)

```js
<ResponsiveContainer width="100%" height={300}>
  <LineChart
    data={chartData}
    margin={{ top: 5, right: 30, left: 20, bottom: 5 }}
  >
    <CartesianGrid strokeDasharray="3 3" />
    <XAxis dataKey="name" />
    <YAxis allowDecimals={false} />
    <Tooltip />
    <Legend />
    <Line type="monotone" dataKey="total" stroke="#5f41b2" name="ì „ì²´ ì»¤ë°‹ ìˆ˜" />
    <Line type="monotone" dataKey="mine" stroke="#545d69" name="ë‚´ ì»¤ë°‹ ìˆ˜" />
  </LineChart>
</ResponsiveContainer>
```

- `total`ê³¼ `mine` ë‘ ê°œì˜ ë¼ì¸ì„ í†µí•´ **íŒ€ ì „ì²´ì™€ ê°œì¸ ì»¤ë°‹** ë¹„êµ ê°€ëŠ¥
- ì‚¬ìš©ì ì¸í„°ë™ì…˜ì„ ê³ ë ¤í•œ `Tooltip`, `Legend` ì ìš©

---

# âœ… ê²°ê³¼ ë° ëŠë‚€ ì 

- ì¼ë³„ ì»¤ë°‹ ìˆ˜ë¥¼ ì‹œê°í™”í•˜ë©´ì„œ **í˜‘ì—… íë¦„ì„ ì‰½ê²Œ íŒŒì•…**í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆê³ , ê°œì¸ì˜ ê¸°ì—¬ë„ë„ ëª…í™•í•´ì¡ŒìŒ
- API ìš”ì²­, ë°ì´í„° ì „ì²˜ë¦¬, ì‹œê°í™”ê¹Œì§€ ì „ì²´ íë¦„ì„ ê²½í—˜í•˜ë©´ì„œ **í”„ë¡ íŠ¸ì—”ë“œ ë°ì´í„° ì²˜ë¦¬ ëŠ¥ë ¥**ì„ í‚¤ìš¸ ìˆ˜ ìˆì—ˆìŒ
- Rechartsì˜ ì§ê´€ì ì¸ API ë•ë¶„ì— í•´ë‹¹ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ë‚˜ì˜ ê¸°ì—¬ë„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŒ.

---

# ğŸ–¼ï¸ ì‘ì—… ê²°ê³¼ë¬¼

![ìš”ì¼ë³„ ì»¤ë°‹ ìˆ˜ ì‹œê°í™”](/assets/post/2025/ureca/day72_project_1.png)

---

## Reference
ì´ í¬ìŠ¤íŠ¸ëŠ” ì•„ë˜ ê²Œì‹œê¸€ì˜ ì •ë³´ ë° ì´ë¯¸ì§€ê°€ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.

1. [GitHub REST API: Commits](https://docs.github.com/en/rest/commits/commits)
2. [Recharts ê³µì‹ ë¬¸ì„œ](https://recharts.org/en-US/)
3. [JavaScript ISO Date Formatting](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)

---

## END
