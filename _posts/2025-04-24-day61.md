---
title: "[Day61] ì‡¼í•‘ëª° ì‹¤ìŠµ - Redux Toolkit"
categories: [Ureca, React]
tags: [React, JS, toolkit, reduxjs, Redux]
image:
  path: /assets/post/2025/ureca/day61_class_1.png
  alt: React
published: true
---

# React Redux Quick Start (Redux Toolkit)

[React-Redux](https://react-redux.js.org/tutorials/quick-start)

## ğŸ”¸ Reduxë€ ?
- ReduxëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœ(state)ë¥¼ ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬.
- Reactì™€ í•¨ê»˜ ì“°ë©´ ì „ì—­ ìƒíƒœ ê´€ë¦¬ë¥¼ ë” íš¨ìœ¨ì ìœ¼ë¡œ í•  ìˆ˜ ìˆìŒ.

## 1. Install Redux Toolkit and React Reduxì„¤ì¹˜
```
npm install @reduxjs/toolkit react-redux
```

- `@reduxjs/toolkit`: Reduxì˜ ê³µì‹ íˆ´í‚·. ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì¤„ì—¬ì£¼ê³  êµ¬ì¡° ì¡ê¸° ì‰¬ì›€.
    - ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ : ë°˜ë³µì ìœ¼ë¡œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ì½”ë“œ
- `react-redux`: Reduxë¥¼ Reactì— ì—°ê²°í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬.

## 2. Create a Redux State Slice
```jsx
import { createSlice } from '@reduxjs/toolkit'
// sliceë¡œ ë§Œë“ ê±¸ storeì— ì—°ê²° í•´ì¤˜ì•¼í•¨
export const counterSlice = createSlice({
  name: 'counter', // sliceì˜ ì´ë¦„ì€ ê³ ìœ í•´ì•¼í•¨. counterì˜ stateë¥¼ ê´€ë¦¬í•  ê²ƒì„
  initialState: {
    count: 1,
    label: 'ì¹´ìš´í„°',
  }, // ê´€ë¦¬í•  ë‚´ìš©
  reducers: {
    increment: (state, action) => {
      state.count += action.payload
    },
    decrement: state => {
      state.count -= 1
    },
    reset: state => {
      state.count = 0
    },
  }, // stateê°€ ë³€ê²½ë˜ëŠ” ë³€ê²½í•¨ìˆ˜ê°€ ë“±ë¡ë˜ëŠ” ê³³, ì–˜ë¥¼ ì“°ë ¤ë©´ í•¨ìˆ˜ ì´ë¦„ì„ ê°ê° exportí•´ì•¼ë¨
})

export const { increment, decrement, reset } = counterSlice.actions // ? ì™œ actions
```

- `createSlice`ëŠ” ì•¡ì…˜ ìƒì„±ì + ë¦¬ë“€ì„œ í•¨ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ ì¤Œ.
- Immerë•ë¶„ì— `state.value += 1`ì²˜ëŸ¼ ë¶ˆë³€ì„±ì„ ê¹¨ì§€ ì•Šê³  ì§ì ‘ ë³€ê²½ ê°€ëŠ¥

## 3. Add Slice Reducers to the Store (ìŠ¤í† ì–´ ì„¤ì •)

```js
import { configureStore } from '@reduxjs/toolkit'
import { counterSlice } from './counterSlice'

export default configureStore({
  reducer: {
    counter: counterSlice.reducer,
  },
})
```

- `configureStore`: Redux Toolkitì—ì„œ ì œê³µí•˜ëŠ” í•¨ìˆ˜
    - `createStore`ë³´ë‹¤ ì„¤ì •ì´ ê°„í¸í•˜ê³  ê¸°ë³¸ devTools, thunk ì„¤ì • í¬í•¨ë¨.
- ì—¬ëŸ¬ sliceë¥¼ reducer ê°ì²´ë¡œ ë¬¶ì–´ì„œ ì‚¬ìš©.

## 4. Provide the Redux Store to React
```jsx
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import { RouterProvider } from 'react-router-dom'
import router from './router.jsx'
import store from './store/store'
import { Provider } from 'react-redux'

createRoot(document.getElementById('root')).render(
  <StrictMode>
    <Provider store={store}>
      <RouterProvider router={router} fallbackElement={<div>ë¡œë”©ì¤‘...</div>} />
    </Provider>
  </StrictMode>
)
```

- `<Provider>`ëŠ” Redux ìŠ¤í† ì–´ë¥¼ React ì•± ì „ì²´ì— ì£¼ì…í•´ì£¼ëŠ” ì»´í¬ë„ŒíŠ¸.


## 5. Use Redux State and Actions in React Components
```jsx
import React from 'react'
import { decrement, increment, reset } from '@/store/counterSlice'
import { useSelector, useDispatch } from 'react-redux'

const BlogPage = () => {
  const dispatch = useDispatch()
  const countData = useSelector(state => state.counter)
  const { count, label } = countData

  const increase = (num = 1) => dispatch(increment(num))
  const decrease = () => dispatch(decrement())
  const restart = () => dispatch(reset())

  return (
    <main>
      <p>{label} : {count}</p>
      <button onClick={() => increase()}>ì¦ê°€í•˜ê¸°</button>
      <button onClick={() => decrease()}>ê°ì†Œí•˜ê¸°</button>
      <button onClick={() => restart()}>ì´ˆê¸°í™”</button>
    </main>
  )
}

export default BlogPage
```

- `useSelector`: storeì˜ stateë¥¼ ì½ì–´ì˜´ (êµ¬ë…).
- `useDispatch`: actionì„ ì‹¤í–‰ì‹œì¼œ stateë¥¼ ë³€ê²½í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ.
- `dispatch(increment({ payload: 1 }))`: reducer ì•ˆì˜ increment í•¨ìˆ˜ ì‹¤í–‰ë¨.

## âœ… ì „ì²´ íë¦„ ìš”ì•½
1. slice íŒŒì¼ì„ ë§Œë“¤ê³  reducer í•¨ìˆ˜ + actions ìƒì„±
2. storeì— slice ë“±ë¡
3. `<Provider>`ë¡œ React ì•± ê°ì‹¸ê¸°
4. ì»´í¬ë„ŒíŠ¸ì—ì„œ `useSelector`, `useDispatch`ë¡œ state ì½ê¸° / ë³€ê²½

<img src="/assets/post/2025/ureca/day61_class_5.png" alt='' width=1300px>

------

# dark mode (with Redux)

## ğŸ”¸ Redux ì ìš© ì „ ë¡œì»¬ ìƒíƒœ ê¸°ë°˜

### êµ¬í˜„ íë¦„
1. ì»´í¬ë„ŒíŠ¸ì—ì„œ `useState`ë¡œ ë‹¤í¬ëª¨ë“œ ìƒíƒœë¥¼ ê´€ë¦¬í•¨
2. `useEffect`ì—ì„œ `localStorage`ì— ì €ì¥ëœ `theme` ê°’ì„ ì½ì–´ì„œ ìƒíƒœ ì´ˆê¸°í™”
3. ì»´í¬ë„ŒíŠ¸ì—ì„œ `Redux` ìƒíƒœ ì¡°íšŒ (`useSelector`)
4. í…Œë§ˆ ë³€ê²½ ë²„íŠ¼ í´ë¦­ â†’ `toggleTheme()` ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜
5. Redux ìŠ¤í† ì–´ì˜ ìƒíƒœê°€ ë³€ê²½ë¨
6. ìƒíƒœ ë³€ê²½ì„ ê°ì§€í•˜ëŠ” `useEffect` â†’ `localStorage`ì™€ `document.body`ì— ë°˜ì˜

#### `document.body.classList.toggle('dark-mode', parsedTheme)`ëŠ” ë¬´ìŠ¨ ì˜ë¯¸ì¼ê¹Œ ?       
ğŸ“Œ `classList.toggle()` ê¸°ë³¸ ì‚¬ìš©ë²•
```js
element.classList.toggle('í´ë˜ìŠ¤ëª…')
```
- í´ë˜ìŠ¤ê°€ **ì—†ìœ¼ë©´ ì¶”ê°€**, **ìˆìœ¼ë©´ ì œê±°**        

<br/>

ğŸ“Œ ì¡°ê±´ì„ ì¶”ê°€í•œ ì‚¬ìš©ë²•

```js
element.classList.toggle('í´ë˜ìŠ¤ëª…', ì¡°ê±´)
```
- `ì¡°ê±´`ì´ `true`ë©´ **ì¶”ê°€**
- `ì¡°ê±´`ì´ `false`ë©´ **ì œê±°**

### ì½”ë“œ
```js
const [isDarkMode, setIsDarkMode] = useState(false)

useEffect(() => {
    const savedTheme = localStorage.getItem('theme')
    if (savedTheme !== null) {
      const parsedTheme = JSON.parse(savedTheme)
      setIsDarkMode(parsedTheme)
      document.body.classList.toggle('dark-mode', parsedTheme)
    }
}, [])

const handleThemeToggle = () => {
    const newTheme = !isDarkMode
    setIsDarkMode(newTheme)
    localStorage.setItem('theme', JSON.stringify(newTheme))
}
```

- ì½ì„ ë• parse, ì €ì¥í•  ë• stringify

## ğŸ”¸ Redux ì ìš©
### ê°œë°œ íë¦„
1. ì „ì—­ ìƒíƒœì—ì„œ `isDarkMode`ë¥¼ Reduxë¡œ ê´€ë¦¬
2. `localStorage`ì—ì„œ ì´ˆê¸° í…Œë§ˆ ìƒíƒœë¥¼ ê°€ì ¸ì˜´ â†’ `themeSlice`ì˜ `initialState`ë¡œ ì„¤ì •
3. `toggleTheme` ì•¡ì…˜ìœ¼ë¡œ ì „ì—­ ìƒíƒœ ë³€ê²½
4. `useEffect`ë¡œ ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤:
    - `localStorage`ì— ì €ì¥
    - `document.body.classList.add/remove`ë¡œ DOM ì—…ë°ì´íŠ¸

### 1. ìƒíƒœ(State) ì •ì˜ - themeSlice

```js
import { createSlice } from '@reduxjs/toolkit'

const savedTheme = localStorage.getItem('theme')
const isDarkTheme = savedTheme !== null ? JSON.parse(savedTheme) : false
export const themeSlice = createSlice({
  name: 'theme',
  initialState: { 
    isDarkMode: isDarkTheme,
  },
  reducers: {
    toggleTheme: state => {
      state.isDarkMode = !state.isDarkMode
    },
  },
})

export const { toggleTheme } = themeSlice.actions
```

- ì „ì—­ìœ¼ë¡œ ê´€ë¦¬í•  `isDarkMode` ìƒíƒœë¥¼ ì •ì˜
- ì´ˆê¸°ê°’ì€ `localStorage`ì—ì„œ ë¶ˆëŸ¬ì™€ì„œ ì„¤ì •
- `createSlice`ë¥¼ í†µí•´ ìƒíƒœì™€ ì•¡ì…˜ì„ ë™ì‹œì— ì •ì˜

### 2. Redux Store ì„¤ì •

```js
import { configureStore } from '@reduxjs/toolkit'
import { counterSlice } from './counterSlice'
import { themeSlice } from './themeSlice'

export default configureStore({
  reducer: {
    counter: counterSlice.reducer,
    theme: themeSlice.reducer,
  },
})
```
- `themeSlice.reduce`ë¥¼ ìŠ¤í† ì–´ì— ë“±ë¡í•´ì„œ ê¸€ë¡œë²Œ ìƒíƒœë¡œ ì—°ê²°


### 3. ì»´í¬ë„ŒíŠ¸ì—ì„œ Redux ìƒíƒœ ì‚¬ìš©
```js
const { isDarkMode } = useSelector(state => state.theme) // ìƒíƒœ ì¡°íšŒ
const dispatch = useDispatch() 

const handleThemeToggle = () => {
    dispatch(toggleTheme()) // ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜
}

useEffect(() => {
    localStorage.setItem('theme', JSON.stringify(isDarkMode))
    if (isDarkMode) {
      document.body.classList.add('dark-mode')
    } else {
      document.body.classList.remove('dark-mode')
    }
}, [isDarkMode])
```
- Redux ìƒíƒœê°€ ë°”ë€Œë©´ í…Œë§ˆ ì„¤ì •ì„ ì‹¤ì œ DOMê³¼ `localStorage`ì— ë°˜ì˜


## ì ìš©ëœ UI
#### dark ëª¨ë“œ ì ìš©
<img src="/assets/post/2025/ureca/day61_class_1.png" alt='' width=1300px>

`body`ì— `dark-mode` ì¶”ê°€ëœ ëª¨ìŠµ
<img src="/assets/post/2025/ureca/day61_class_2.png" alt='' width=1300px>

#### dark ëª¨ë“œ í•´ì œ
<img src="/assets/post/2025/ureca/day61_class_3.png" alt='' width=1300px>

`body`ì— `dark-mode` ì œê±°ëœ ëª¨ìŠµ
<img src="/assets/post/2025/ureca/day61_class_4.png" alt='' width=1300px>

-----

# TODOS - Redux Toolkitìœ¼ë¡œ ë¹„ë™ê¸° ìƒíƒœ ê´€ë¦¬

## âœ… ì „ì²´ íë¦„ ìš”ì•½
1. API í•¨ìˆ˜ ì‘ì„± (axios)
2. **createAsyncThunk + createSlice**ë¡œ ë¹„ë™ê¸° ë¡œì§ & ìƒíƒœ ì •ì˜
3. storeì— slice ë“±ë¡
4. ì»´í¬ë„ŒíŠ¸ì—ì„œ `dispatch`, `useSelector`ë¡œ ì‚¬ìš©

## ğŸ”¸ ì„œë²„ì—ì„œ todos ê°€ì ¸ì˜¤ê¸° - todosApi.js
```jsx
import axios from 'axios'

export const getTodosData = async () => {
  try {
    const res = await axios.get(`/api/todos`)
    return res.data
  } catch (error) {
    console.log(error)
  }
}
```

- ì™¸ë¶€ API (ë˜ëŠ” mock ì„œë²„ ë“±)ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ ì •ì˜
- ë‚˜ì¤‘ì— createAsyncThunkì—ì„œ í˜¸ì¶œë¨


## ğŸ”¸ ë¹„ë™ê¸° actions + ìƒíƒœ slice ì •ì˜ - todosSlice.js
```jsx
import { getTodosData } from '@/api/todosApi'
import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'

// 1. ë¹„ë™ê¸° thunk action ìƒì„±
export const fetchTodos = createAsyncThunk('todos/fetchTodos', async () => {
  const res = await getTodosData()
  return res
})
// 2. slice ì •ì˜
export const todosSlice = createSlice({
  name: 'todos',
  initialState: {
    todos: [],
    status: 'idle', // 'idle' | 'loading' | 'succeeded' | 'failed'
    error: null,
  },
  extraReducers(builder) {
    builder
      .addCase(fetchTodos.pending, status => {
        status.status = 'loading'
        status.error = null
      })
      .addCase(fetchTodos.fulfilled, (status, action) => {
        status.status = 'succeeded'
        status.todos = action.payload
        status.error = null
      })
      .addCase(fetchTodos.rejected, (status, action) => {
        status.status = 'failed'
        status.error = action.error.message
      })
  },
})
```
- `createAsyncThunk`ë¥¼ í†µí•´ ë¹„ë™ê¸° ìš”ì²­ê³¼ ìƒíƒœ ê´€ë¦¬ ì‰½ê²Œ ì²˜ë¦¬
- `extraReducers`ì—ì„œ ìš”ì²­ ìƒíƒœì— ë”°ë¼ ì²˜ë¦¬ ë¶„ê¸°


## ğŸ”¸ storeì— slice ë“±ë¡
```jsx
import { configureStore } from '@reduxjs/toolkit'
import { counterSlice } from './countSlice'
import { todosSlice } from './todosSlice'

export default configureStore({
  reducer: {
    counter: counterSlice.reducer,
    todos: todosSlice.reducer,
  },
})
```

## ğŸ”¸ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© - TodoList.jsx
```jsx
import React, { useEffect } from 'react'
import { useDispatch, useSelector } from 'react-redux'
import { fetchTodos } from '@/store/todoSlice'
import ListGroup from 'react-bootstrap/ListGroup'

const TodoList = () => {
  const dispatch = useDispatch()
  const { todos, status, error } = useSelector(state => state.todos)

  useEffect(() => {
    dispatch(fetchTodos())
  }, [dispatch])

  if (status === 'loading') return <div>Loading...</div>
  if (status === 'failed') return <div>{error}</div>

  if (status)
    return todos.length === 0 ? (
      <div>í……</div>
    ) : (
      <ListGroup>
        {todos.map(todo => (
          <ListGroup.Item
            key={todo.id}
            className="d-flex justify-content-between align-items-center"
          >
            <p className=" flex-grow-1">{todo.todosDesc}</p>
            <p className=" m-2" style={{ fontSize: '0.75em' }}>
              {todo.createAt}
            </p>
            <i className="bi bi-trash"></i>
          </ListGroup.Item>
        ))}
      </ListGroup>
    )
}

export default TodoList
```

- `useDispatch`ë¡œ thunk action í˜¸ì¶œ (`fetchTodos`)
- `useSelector`ë¡œ ì „ì—­ ìƒíƒœ ì ‘ê·¼

<img src="/assets/post/2025/ureca/day61_class_6.png" alt='' width=1300px>


-----

## END